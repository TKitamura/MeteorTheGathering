<template name="game">
  {{#if show}}
  <div id="game">
    <div id="dashboard">
      <div id="game-info">
        <span id="game-name">
          {{gameName}} [<a href="#" id="show-game-form">change game</a>]
          <input type="text" style="width: 1px; visibility: hidden;" />
        </span>
        <form id="change-game-form">
          <input id="new-game" type="text" value="{{gameName}}" />
          <input type="submit" value="Change Game" />
          <a href="#" id="cancel-game-form">cancel</a>
        </form>
      </div>
    </div>
    <div id="their-hand">
      <div id="opponent-info">
        {{#if opponentPlayerName}}
          {{opponentPlayerName}}
          <em>armed w/</em> {{opponentDeckName}} ({{opponentDeckCardCount}} cards)
        {{else}}
          <em>no opponent yet</em>
        {{/if}}
        <input type="text" style="width: 1px; visibility: hidden;" />
      </div>
      {{#if opponentIsStarted}}
        <div id="opponent-library-info">
          Library ({{opponentLibrarySize}})
        </div>
        {{#each opponentHand}}
          <img src="back.jpg" class="card" />
        {{/each}}
      {{/if}}
    </div>
    <div id="mat">
      <div id="mat-contents">
        {{#each cardsOnMat}}
          <div id="card-container-{{_id}}" class="card-container" style="top: {{top}}px; left: {{left}}px; z-index: {{z_index}};">
            <img src="http://gatherer.wizards.com/Handlers/Image.ashx?name={{name}}&type=card" class="card {{state}}" title="{{name}}" id="card-{{_id}}" />
          </div>
          {{#if menuItems}}
            <div id="menu" style="top: {{menuTop}}px; left: {{menuLeft}}px;">
              {{#each menuItems}}
                <a href="#" class="{{action}}">{{text}}</a><br />
              {{/each}}
            </div>
          {{/if}}
        {{/each}}
      </div>
    </div>
    <div id="my-hand">
      <div id="player-info">
        <span id="player-name">
          {{playerName}} [<a href="#" id="show-player-form">change name</a>]
        </span>
        <form id="change-player-form">
          <input id="new-player" type="text" value="{{playerName}}" />
          <input type="submit" value="Change Name" />
          <a id="cancel-player-form" href="#">cancel</a>
        </form>
        <em>armed w/</em>
        <span id="deck-name">      
          {{deckName}} ({{deckCardCount}} cards) [<a href="#" id="show-deck-form">change deck</a> | <a href="#" id="edit-deck">edit contents</a>]
        </span>
        <form id="change-deck-form">
          <input id="new-deck" type="text" value="{{deckName}}" />
          <input type="submit" value="Change Deck" />
          <a id="cancel-deck-form" href="#">cancel</a>
        </form>
        <input type="text" style="width: 1px; visibility: hidden;" />
      </div>
      {{#if isStarted}}
        <div id="library-info">
          Library ({{librarySize}})<br />
          <input id="draw" type="button" value="Draw" /><br />
          <br />
          <input id="search" type="button" value="Search" />
        </div>
        {{#each myHand}}
          <img src="http://gatherer.wizards.com/Handlers/Image.ashx?name={{name}}&type=card" class="card" title="{{name}}" id="card-{{_id}}" />
        {{/each}}
      {{else}}
      <div id="library-info">
        <input id="start" type="button" value="Start" />
      </div>
      {{/if}}
    </div>
  </div>
  {{/if}}
</template>
